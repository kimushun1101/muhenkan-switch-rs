---
title: キー割り当ての設計思想
date: 2026-02-22
tags:
  - key-assignment
  - design-philosophy
  - muhenkan
---

## 無変換キー中心の設計

muhenkan-switch は**無変換キーを左手親指で押しながら**他のキーを押す操作体系である。この名前自体が設計思想を表している。

### 基本原則: 左手ディスパッチ / 右手テキスト編集

```
┌─────────────────────────────────────────────────────────┐
│  JIS キーボード（無変換レイヤー）                          │
│                                                         │
│  ┌─────────────────────┐  ┌─────────────────────────┐   │
│  │      左手領域        │  │       右手領域           │   │
│  │  コンテキスト切替    │  │    テキスト編集          │   │
│  │  （片手操作を想定）  │  │  （両手操作を想定）      │   │
│  └─────────────────────┘  └─────────────────────────┘   │
│                                                         │
│           [無変換] ← 左手親指で押下                       │
└─────────────────────────────────────────────────────────┘
```

#### 左手: コンテキスト切替（右手はマウスの可能性あり）

ユーザーがマウスで作業中に、左手だけで以下を実行する想定:

- **アプリ切替**: 無変換+f でブラウザ、無変換+a でエディタ、等
- **Web 検索**: テキスト選択後、無変換+g で Google 検索
- **フォルダオープン**: 無変換+1 で Downloads、等
- **タイムスタンプ操作**: 無変換+v/c/x

これらは**右手がマウス上にあっても左手だけで完結**する。ブラウザで調べものをしながらエディタに戻る、ファイルをダウンロードしてフォルダを開く、といったワークフローに最適化されている。

#### 右手: テキスト編集（両手がキーボード上）

タイピング中は両手がキーボード上にある。右手は Vim 風の操作で**ホームポジションから手を動かさずに**テキスト編集を行う:

- **カーソル移動**: h/j/k/l（Vim 配置）
- **単語・行移動**: u/i（単語左右）、y/o（行頭・行末）
- **削除**: n（BackSpace）、m（Delete）
- **エスケープ**: ;
- **句読点**: ,/. → 、/。

### なぜ変換キーは使わないのか

変換キーは右手親指で押す。しかし:

1. **右手がマウス上のとき**: 変換キーが押せない。左手のキーを使うことになるが、それは無変換キーで既にカバーしている
2. **両手がキーボード上のとき**: 変換キーを右手親指で押しながら左手で操作することは可能だが、それは無変換キーの左手操作と重複する
3. **学習コストの増加**: 2つの修飾キーに異なる機能を割り当てると、覚えるべき組み合わせが倍増する

つまり、変換キーに割り当てを追加しても**無変換キーで既にできることの重複**になるか、**学習コストに見合わない機能追加**になる。無変換キー1つに集約することで、シンプルさを維持している。

---

## キーボード配置の詳細

### 左手: ディスパッチキー + 固定アクション

```
  [1][2][3][4][5]         ← フォルダ (dispatch)
    [q][r][t]  [g]        ← 検索 (dispatch)
     [a] [w][e][s][d][f]  ← アプリ + 検索 (dispatch)
     [z] [x][c][v] [b]    ← タイムスタンプ (固定) + 追加 dispatch
```

| 種別 | キー | 備考 |
|------|------|------|
| dispatch (config.toml で自由に割当) | 1-5, q, r, t, g, a, w, e, s, d, f, b | 検索・フォルダ・アプリに使用 |
| 固定アクション | v (ts-paste), c (ts-copy), x (ts-cut) | タイムスタンプ操作 |
| 未使用 | z | 将来の拡張用 |

### 右手: テキスト編集（固定）

```
    [y][u][i][o]   [p:空き]
     [h][j][k][l]  [;:Esc]
      [n][m]  [,:de-indent] [.:indent]
```

| カテゴリ | キー | 割当 | 備考 |
|---------|------|------|------|
| カーソル移動 | h, j, k, l | ←, ↓, ↑, → | Vim 配置 |
| 単語移動 | u, i | Ctrl+←, Ctrl+→ | |
| 行移動 | y, o | Home, End | |
| 削除 | n, m | BackSpace, Delete | 物理キーが遠いため muhenkan に価値あり |
| エスケープ | ; | Esc | 物理キーが遠いため muhenkan に価値あり |
| インデント | , . | de-indent, indent | Tab が効かない環境でも動作（#28） |
| 空き | p | （未割り当て） | スクリーンショットを廃止（#28） |

### 句読点（、。）を廃止した理由

IME が有効な状態では `,` → `、` と `.` → `。` の変換は IME 側で処理される。muhenkan レイヤーで重複して持つ必要がなく、より価値の高いインデント操作に割り当てる。

### スクリーンショット（P）を廃止した理由

OS 標準ショートカットと完全に重複しており、独自の価値がない。

| OS | OS 標準 |
|----|---------|
| Windows | Win+Shift+S |
| Linux | PrintScreen |
| macOS | Cmd+Shift+4 |

---

## 右手キーを追加しない理由

### 検討した候補

| 候補 | 機能 | 見送り理由 |
|------|------|-----------|
| Undo (Ctrl+Z) | 元に戻す | Ctrl+Z は十分認知されており、ホームポジションを大きく崩す操作ではない |
| Redo (Ctrl+Y) | やり直し | 同上 |
| Find (Ctrl+F) | 検索 | 同上 |
| Page Up/Down | ページ移動 | 使用頻度が低い |

### 割り当てるべき操作の基準

muhenkan レイヤーに載せる価値があるのは、以下の条件を**両方**満たす操作:

1. **物理キーがホームポジションから遠い**（BackSpace, Delete, Esc, 矢印キーなど）
2. **使用頻度が高い**

Ctrl+Z / Ctrl+Y / Ctrl+F は条件1を満たさない（Ctrl は左手小指で押せる位置にあり、ホームポジションからの逸脱が小さい）。スクリーンショットは条件2を満たさない。

これらは OS 標準のショートカットに委ね、muhenkan レイヤーは**本当にホームポジションを崩す操作**に集中する。
